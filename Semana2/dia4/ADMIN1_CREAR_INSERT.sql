/*
Parte 1: Creación de Esquema de Tablas
1. Crear Tablas
CONSTRAINT PROFESOR_FK FOREIGN KEY(PROFESOR_ID) REFERENCES PROFESOR(ID_PROFESOR)
*/

CREATE TABLE EMPLEADO(
    ID_EMPLEADO NUMBER,
    NOMBRE NVARCHAR2(100),
    SALARIO NUMBER,
    FECHA_INGRESO DATE,
    DEPARTAMENTO_ID,
    CONSTRAINT EMPLEADO_PK PRIMARY KEY(ID_EMPLEADO),
    CONSTRAINT DEPARTAMENTO_FK FOREIGN KEY(DEPARTAMENTO_ID) REFERENCES DEPARTAMENTO(ID_DEPARTAMENTO)
);
COMMIT;

INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(1,'NORMA ROMERO',8000.00,TO_DATE('15/03/2020', 'DD/MM/YYYY'),1);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(2, 'María García',3800.00, TO_DATE('22/07/2019', 'DD/MM/YYYY'),2);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(3, 'Carlos López',5200.00, TO_DATE('10/01/2018', 'DD/MM/YYYY'),3);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(4, 'Ana Martínez',4100.00, TO_DATE('05/11/2021', 'DD/MM/YYYY'),4);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(5, 'Pedro Sánchez',3900.00, TO_DATE('30/05/2022', 'DD/MM/YYYY'),5);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(6, 'Laura Díaz',4700.00, TO_DATE('18/09/2017', 'DD/MM/YYYY'),1);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(7, 'Miguel Ángel Ruiz',3600.00, TO_DATE('14/02/2020', 'DD/MM/YYYY'),2);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(8, 'Sofía Herrera',5100.00, TO_DATE('03/04/2019', 'DD/MM/YYYY'),3);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(9, 'David Jiménez',4300.00, TO_DATE('27/08/2021', 'DD/MM/YYYY'),NULL);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(10, 'Elena Castro',4000.00, TO_DATE('09/12/2022', 'DD/MM/YYYY'),5);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(11, 'Fernando Ortega',4600.00, TO_DATE('22/06/2018', 'DD/MM/YYYY'),1);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(12, 'Isabel Mendoza', 3700.00, TO_DATE('17/10/2019', 'DD/MM/YYYY'),2);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(13, 'Ricardo Vargas', 5300.00, TO_DATE('05/03/2017', 'DD/MM/YYYY'),3);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(14, 'Patricia Silva', 4200.00, TO_DATE('11/07/2020', 'DD/MM/YYYY'),4);
INSERT INTO EMPLEADO(ID_EMPLEADO,NOMBRE,SALARIO,FECHA_INGRESO,DEPARTAMENTO_ID) VALUES
(15, 'Jorge Morales', 3950.00, TO_DATE('28/01/2023', 'DD/MM/YYYY'),3);
SELECT * FROM EMPLEADO;
/************************************************************************************/
CREATE TABLE DEPARTAMENTO(
    ID_DEPARTAMENTO NUMBER,
    NOMBRE NVARCHAR2(100),
    CONSTRAINT DEPARTAMENTO_PK PRIMARY KEY(ID_DEPARTAMENTO)
);
COMMIT;

INSERT INTO DEPARTAMENTO VALUES(1,'RECURSOS HUMANOS');
INSERT INTO DEPARTAMENTO VALUES(2,'MARKETING');
INSERT INTO DEPARTAMENTO VALUES(3,'TI');
INSERT INTO DEPARTAMENTO VALUES(4,'DIRECCION GENERAL');
INSERT INTO DEPARTAMENTO VALUES(5,'CONTABILIDAD');


CREATE TABLE PROYECTO(
    ID_PROYECTO NUMBER,
    NOMBRE NVARCHAR2(100),
    FECHA_INICIO DATE,
    FECHA_FIN DATE,
    CONSTRAINT PROYECTO_PK PRIMARY KEY(ID_PROYECTO)
);
COMMIT;

INSERT ALL
  INTO PROYECTO VALUES (101, 'App Móvil de Ventas', TO_DATE('01/04/2023', 'DD/MM/YYYY'), TO_DATE('31/12/2023', 'DD/MM/YYYY'))
  INTO PROYECTO VALUES (102, 'Inteligencia de Negocios', TO_DATE('10/02/2023', 'DD/MM/YYYY'), TO_DATE('28/02/2024', 'DD/MM/YYYY'))
  INTO PROYECTO VALUES (103, 'Rediseño de Base de Datos', TO_DATE('15/08/2023', 'DD/MM/YYYY'), TO_DATE('30/09/2023', 'DD/MM/YYYY'))
  
SELECT 1 FROM DUAL;

-- Proyecto 3 (finalizado)
INSERT INTO PROYECTO (ID_PROYECTO, NOMBRE, FECHA_INICIO, FECHA_FIN)
VALUES (104, 'Migración a Cloud', TO_DATE('15/05/2022', 'DD/MM/YYYY'), TO_DATE('20/11/2022', 'DD/MM/YYYY'));

INSERT INTO PROYECTO (ID_PROYECTO, NOMBRE, FECHA_INICIO, FECHA_FIN)
VALUES (105, 'Implementación CRM', TO_DATE('01/09/2023', 'DD/MM/YYYY'), NULL);

INSERT INTO PROYECTO (ID_PROYECTO, NOMBRE, FECHA_INICIO, FECHA_FIN)
VALUES (106, 'Automatización de Procesos', TO_DATE('15/10/2023', 'DD/MM/YYYY'), NULL);

SELECT * FROM PROYECTO;

/********************/

CREATE TABLE ASIGNACION(
    ID_ASIGNACION NUMBER,
    EMPLEADO_ID NUMBER,
    PROYECTO_ID NUMBER,
    HORAS_TRABAJADAS NUMBER,
    CONSTRAINT ASIGNACION_PK PRIMARY KEY(ID_ASIGNACION),
    CONSTRAINT EMPLEADO_ID_FK FOREIGN KEY(EMPLEADO_ID) REFERENCES EMPLEADO(ID_EMPLEADO),
    CONSTRAINT PROYECTO_ID_FK FOREIGN KEY(PROYECTO_ID) REFERENCES PROYECTO(ID_PROYECTO)
);
COMMIT;

INSERT ALL
    INTO ASIGNACION VALUES(1001,2,101,24)
    INTO ASIGNACION VALUES(1002,6,102,10)
    INTO ASIGNACION VALUES(1003,8,103,12)
    INTO ASIGNACION VALUES(1004,10,104,8)
    INTO ASIGNACION VALUES(1005,12,105,30)
    INTO ASIGNACION VALUES(1006,14,101,26)
    INTO ASIGNACION VALUES(1007,15,102,18)
    INTO ASIGNACION VALUES(1008,5,103,15)
    INTO ASIGNACION VALUES(1009,1,104,20)
    INTO ASIGNACION VALUES(1010,4,105,9)
SELECT 1 FROM DUAL;

SELECT * FROM ASIGNACION;



